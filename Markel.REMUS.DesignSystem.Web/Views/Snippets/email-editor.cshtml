<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width">
</head>
<body style="width: 100% !important; min-width: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; color: #222222; font-family: Tahoma, sans-serif; font-weight: normal; text-align: left; line-height: 19px; font-size: 14px; margin: 0; padding: 0;">

<div id="ds-editing-tools" style="padding: 20px;">
    <h2 style="display: inline; vertical-align:middle; padding-right: 20px;">Email Template Editor</h2>
    <button onclick="exportTemplateFile()">Export template file</button>
    <button onclick="editEmailContent()">Edit</button>
    <button onclick="saveEmailContent()">Save</button>
    <script type="text/javascript">
        function copyToClipboard(text) {
            window.prompt("Copy this box's contents (the template) with: Ctrl+C on your keyboard", text);
        }
        function utf8_to_b64(str) {
            return window.btoa(encodeURIComponent(escape(str)));
        }

        function exportTemplateFile() {
            var iframeDocument = document.querySelector('#email-template-container').contentDocument;
            var templateHTML = iframeDocument.querySelector('html').innerHTML;
            var uri = "data:application/octet-stream;charset=utf-8,"+ encodeURIComponent(templateHTML);
            document.location = uri;
        }

        function editEmailContent() {
            var iframeDocument = document.querySelector('#email-template-container').contentDocument;
            iframeDocument.querySelector('.body').setAttribute('contenteditable', true);
        }
        function saveEmailContent() {
            var iframeDocument = document.querySelector('#email-template-container').contentDocument;
            iframeDocument.querySelector('.body').removeAttribute('contenteditable');
        }
    </script>
    <h4>Instructions</h4>
    <ol>
        <li>Click 'edit' to edit the template.</li>
        <li>Click 'Save' when you're done editing.</li>
        <li>Then click 'export template file' and save with an extension of .html and use this file in your email service.</li>
    </ol>
    <h4>Extra tips</h4>
    <ul>
        <li>Whilst in edit mode you can copy-paste blocks (eg. the whole of the white panel), you can also copy-paste text blocks.</li>
        <li>Link locations need to be edited in the output after you copy-paste to the .html file.</li>
    </ul>
    <h4>Testing</h4>
    <ul>
        <li>You can send the output template to various email addresses using <a href="https://putsmail.com/tests/new">the 'PutsMail' service</a>. Then test on various email clients on different devices / operating systems. -
            <a href="https://www.campaignmonitor.com/resources/will-it-work/email-clients/">here's a list of popular devices / email clients</a>.</li>
        <li>Do we need a <a href="https://litmus.com/">Litmus</a> / <a href="http://www.emailonacid.com/">Email on Acid</a> account for testing?...</li>
        <li>Note: this email uses an adapted version of the <a href="http://zurb.com/ink/downloads/templates/hero.html">'hero' boilerplate from Zurb</a> so it has a certain amount of robustness built in.</li>
    </ul>
</div>

<!-- DO NOT EDIT INSIDE IFRAME. REPLACE IFRAME CONTENTS WITH OUTPUT FROM ZURB STYLES/TEMPLATE/INLINER -->
<iframe src="output-email" id="email-template-container" style="width:100%; height: 100%;">
</iframe>

</body>
</html>